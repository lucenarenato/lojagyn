!function(e){var t={};function o(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=10)}({10:function(e,t,o){e.exports=o(11)},11:function(e,t,o){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};jQuery(function(e){var t,o;function r(e){return(e=parseFloat(e)*o).toFixed(2)}function n(e,o,a,r){o=isNaN(o=Math.abs(o))?2:o,a=void 0===a?".":a,r=void 0===r?",":r;var n=e<0?"-":"",i=String(parseInt(e=Math.abs(Number(e)||0).toFixed(o))),s=i.length>3?i.length%3:0,c=n+(s?i.substr(0,s)+r:"")+i.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+r)+(o?a+Math.abs(e-i).toFixed(o).slice(2):"");return"before"===t.pos?t.symbol+""+c:c+""+t.symbol}(function(){Handlebars.registerHelper("numberFormat",function(e,t){e=parseFloat(e);var o=t.hash.decimalLength||2,a=t.hash.thousandsSep||",",r=t.hash.decimalSep||".",n="\\d(?=(\\d{3})+"+(o>0?"\\D":"$")+")",i=e.toFixed(Math.max(0,~~o));return(r?i.replace(".",r):i).replace(new RegExp(n,"g"),"$&"+a)}),Handlebars.registerHelper("format_price",function(e,o){e=parseFloat(e);var a=o.hash.decimalLength||2,r=o.hash.thousandsSep||",",n=o.hash.decimalSep||".",i="\\d(?=(\\d{3})+"+(a>0?"\\D":"$")+")",s=e.toFixed(Math.max(0,~~a)),c=(n?s.replace(".",n):s).replace(new RegExp(i,"g"),"$&"+r);return"before"===t.pos?t.symbol+""+c:c+""+t.symbol}),Handlebars.registerHelper("math_format",function(e,t,o,a){return{"+":n((e=parseFloat(e))+(o=parseFloat(o))),"-":n(e-o),"*":n(e*o),"/":n(e/o)}[t]}),Handlebars.registerHelper("image",function(e,t){return 1===t?e.replace("_640x640.jpg","_50x50.jpg"):e.replace("_640x640.jpg","")}),Handlebars.registerHelper("lovercase",function(e){return e.toLowerCase()})})();var i,s="#dm-container",c="#dm-container-result",l="#tmpl-form",d="#tmpl-search-result",u="#tmpl-not-found",h="#tmpl-reviews-list",p={cat:"#categoryId",subcat:"#subCategoryId",page:"#page",sort:"#sort",keywords:"#keywords",item:".product-item-list",free:"#free",warehouse:"#warehouse",to:"#to",company:"#company",originalPriceFrom:"#originalPriceFrom",originalPriceTo:"#originalPriceTo",volumeFrom:"#volumeFrom",volumeTo:"#volumeTo",free_e:"#free_e",warehouse_e:"#warehouse_e",to_e:"#to_e",company_e:"#company_e",originalPriceFrom_e:"#originalPriceFrom_e",originalPriceTo_e:"#originalPriceTo_e",volumeFrom_e:"#volumeFrom_e",volumeTo_e:"#volumeTo_e"},m=".js-details",g=".js-import-product",f=".js-import-selected",v=".js-apply-range",w="";({request:function(t,o,a){i=e("#keywords").val(),e(document.body).hasClass("folded")&&("1",e(".settings-block").show(),e("#wpbody-content .wrap").addClass("setting_open")),window.matchMedia("screen and (max-width: 576px)").matches&&(e("body .import-settings-btn").html("SETTINGS"),e("body .params-list-sku").addClass("collapse")),o=""!==o&&o instanceof jQuery?window.ADS.serialize(o):o,e(p.to).selectpicker("refresh"),e.ajaxQueue({url:ajaxurl,data:{action:"dm_alidropship_api",ads_action:t,args:o},type:"POST",dataType:"json",success:a})},searchFormRender:function(t){var a=e(l).html(),r=e(s);t&&(t.hasOwnProperty("error")?(window.ADS.notify(t.error,"danger"),window.ADS.screenUnLock()):(o=t.convert_value,r.html(window.ADS.objTotmpl(a,t)),setTimeout(window.ADS.switchery(r),300),e(document).trigger("search:request")))},searchForm:function(){window.ADS.screenLock(),this.request("search_form","",this.searchFormRender)},subcatRender:function(t){var o=e(p.subcat);if(t)if(t.hasOwnProperty("error"))window.ADS.notify(t.error,"danger"),o.closest(".sub-cat-col").hide(),window.ADS.screenUnLock();else if(t.hasOwnProperty("success"))o.closest(".sub-cat-col").hide(),e(document).trigger("search:request");else{var a="";e.each(t,function(e,t){a+='<option value="'+t.key+'">'+t.val+"</option>"}),o.html(a).each(function(){e(this).find("option").length>20&&e(this).data("live-search","true")}).selectpicker("refresh"),o.closest(".sub-cat-col").show(),e(document).trigger("search:request")}},subcat:function(){this.request("subcat",e(s),this.subcatRender)},searchRender:function(o){var a=e(c),r=0;if(o){if(o.hasOwnProperty("error"))window.ADS.notify(o.error,"danger"),o.hasOwnProperty("total")&&(a.html(window.ADS.objTotmpl(e(u).html(),o)),window.ADS.createJQPagination(s,0,1,40),e(p.to).selectpicker("refresh"));else{var n=e(".tab-nav-filters");if(n.hasClass("d-none")&&n.removeClass("d-none"),r=o.total,t=o.currency_format,o.hasOwnProperty("notavailable")&&e("#items-notfounded").html(o.notavailable),a.html(window.ADS.objTotmpl(e(d).html(),o)),a.find(".pagination-menu").length&&(window.ADS.createJQPagination("#"+a.attr("id"),o.total,o.page,40),window.ADS.createJQPagination(s,o.total,o.page,40)),e("#sortby").val(e("#sort").val()).selectpicker("refresh"),setTimeout(window.ADS.switchery(a),300),o.hasOwnProperty("breadcrumbs")&&o.breadcrumbs){var i=o.breadcrumbs.length,l=e(".breadcrumb-list");l.html(""),e.each(o.breadcrumbs,function(t,o){if(l.append(" > "),t+1===i)l.append(o.title+" ");else{var a=e("<a/>",{href:"javascript:;",text:o.title}).attr({"data-cat":o.id,class:"color-blue","data-selector":0===t?"categoryId":"subCategoryId"});l.append(a)}})}else e(".breadcrumb-list").html("")}var h=(r+"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1,");e("#items-founded").text(h),e("#has_deposit").text(o.deposit),window.ADS.screenUnLock()}},searchRequest:function(){window.ADS.screenLock(),e("#categoryId").length?this.request("search",e(s),this.searchRender):this.request("search_my",e(s),this.searchRender)},showDetails:function(t){var o=e("#supplier-"+t.data.id);e("#product-"+t.data.id).hide();var a=e("#to").val();o.html(window.ADS.objTotmpl(e("#tmpl-view-details").html(),t.data)),setTimeout(window.ADS.switchery(o),300),setTimeout(function(){o.find("#ship_country_"+t.data.productId).val(a).trigger("change")},400),o.find(".carousel").carousel().swipe({swipe:function(t,o,a,r,n,i){"left"===o&&e(this).carousel("next"),"right"===o&&e(this).carousel("prev")},allowPageScroll:"vertical"}),e('[data-id="'+t.data.id+'"]').addClass("opened"),window.matchMedia("screen and (max-width: 576px)").matches&&e('[data-id="'+t.data.id+'"]').addClass("opened_mobile"),window.ADS.screenUnLock(),window.matchMedia("screen and (max-width: 576px)").matches&&(e('body [id*="dm_collapseVariants-"]').addClass("collapse"),w=e(".mobile_dest").detach(),e(".tab-pane.active.show").removeClass("active show"))},importFormRender:function(t){if(t){if(t.hasOwnProperty("error"))window.ADS.notify(t.error,"danger");else{var o="";e.each(t.values_categoryImport,function(e,t){o+='<option value="'+t.value+'">'+t.title+"</option>"}),e("#categoryImport").html(o).each(function(){e(this).find("option").length>20&&e(this).data("live-search","true")}).selectpicker("refresh"),window.ADS.notify(t.success,"success")}window.ADS.screenUnLock()}},checker:function(){var t="#checkAll";e(document).on("change",t,function(){e(c).find('[type="checkbox"]').prop("checked",e(this).prop("checked")),e.uniform.update();var t=e(c).find('[type="checkbox"]:checked').length;t>0?e("#count_ckeck").html(" ("+t+")"):e("#count_ckeck").html("")}),e(c).on("change",'[type="checkbox"]',function(){var o=e(c).find('[type="checkbox"]:checked').length;o>0?e("#count_ckeck").html(" ("+o+")"):e("#count_ckeck").html(""),!1===e(this).prop("checked")&&e(t).prop("checked",!1).uniform.update(),e(c).find('[type="checkbox"]:checked').length===e(c).find('[type="checkbox"]').length&&e(t).prop("checked",!0).uniform.update()})},reportRender:function(t){t.hasOwnProperty("error")&&window.ADS.notify(t.error,"danger"),t.hasOwnProperty("success")&&(window.ADS.notify(t.success,"success"),e("#reportModal").modal("hide"))},renderProgress:function(e){e.hasOwnProperty("error")&&window.ADS.notify(e.error,"danger"),e.hasOwnProperty("success")&&window.ADS.progress("#checker-progress",e.total,e.current)},checkNot:function(e){this.request("check_not","page="+e,this.renderProgress)},handler:function(){var t=this;e(document).on("search:request",function(){window.ADS.screenLock();var o=e(document).find(".jqpagination");o.find("a").length&&o.jqPagination("destroy"),t.searchRequest()}),e(document).on("change",p.cat,function(){e(p.page).val(1),t.subcat()}),e(document).on("change",p.subcat,function(){e(p.page).val(1),e(document).trigger("search:request")}),e(document).on("change",p.warehouse,function(){e(p.page).val(1),e(document).trigger("search:request")}),e(document).on("change",p.to,function(){e(p.page).val(1),e(p.to).selectpicker("refresh"),e(document).trigger("search:request")}),e(document).on("change",p.company,function(){e(p.page).val(1),e(document).trigger("search:request")}),e(document).on("change",p.free,function(){e(p.page).val(1),e(document).trigger("search:request")}),e(document).on("click",v,function(){e(p.page).val(1),e(document).trigger("search:request")}),e(document).on("click",".clear_all",function(){e(p.page).val(1),e(p.originalPriceFrom).val(""),e(p.originalPriceTo).val(""),e(p.volumeFrom).val(""),e(p.volumeTo).val(""),e(p.sort).val("volumeDown"),e(p.warehouse).val("").selectpicker("refresh"),e(p.to).val("US").selectpicker("refresh"),e(p.company).val("9999").selectpicker("refresh"),e(p.originalPriceFrom_e).val(""),e(p.originalPriceTo_e).val(""),e(p.volumeFrom_e).val(""),e(p.volumeTo_e).val(""),e(p.sort_e).val(""),e(p.warehouse_e).val("").selectpicker("refresh"),e(p.to_e).val("US").selectpicker("refresh"),e(p.company_e).val("9999").selectpicker("refresh"),e("#supplier").val(""),e(document).trigger("search:request"),e("#uniform-free span").removeClass("checked"),e("#uniform-free_e span").removeClass("checked")}),e(document).on("click","#collapse-button",function(){e("#wpbody-content .wrap").hasClass("setting_open")?(setUserSetting("fold",1),setUserSetting("unfold",0),setUserSetting("mfold","1"),e(".settings-block").hide(),e(document.body).removeClass("folded"),e("#wpbody-content .wrap").removeClass("setting_open")):(setUserSetting("unfold",1),setUserSetting("fold",0),setUserSetting("mfold","o"),e(document.body).addClass("folded"),e(".settings-block").show(),e("#wpbody-content .wrap").addClass("setting_open"))}),e(document).on("click","#settings_toggle",function(){e("#wpbody-content .wrap").hasClass("setting_open")?(e(".settings-block").hide(),e("#wpbody-content .wrap").removeClass("setting_open"),e(document.body).removeClass("folded")):(e("#wpwrap").removeClass("wp-responsive-open"),e(".settings-block").show(),e("#wpbody-content .wrap").addClass("setting_open"),e(document.body).addClass("folded"))}),e(document).on("click",".ab-item",function(){e("#wpbody-content .wrap").hasClass("setting_open")&&(e(".settings-block").hide(),e("#wpbody-content .wrap").removeClass("setting_open"))}),e(document).on("click","#close_filters",function(){e("#wpbody-content .wrap").hasClass("setting_open")&&(e(".settings-block").hide(),e("#wpbody-content .wrap").removeClass("setting_open"),e(document.body).removeClass("folded"))}),e(document).on("change","#create_cat",function(){var t=e("#create_cat").is(":checked")?1:0;e.ajaxQueue({url:ajaxurl,data:{action:"dm_alidropship_api",ads_action:"save_settings",args:"create_cat="+t},type:"POST"})}),e(document).on("change","#cat_status",function(){var t=e("#cat_status").val();e.ajaxQueue({url:ajaxurl,data:{action:"dm_alidropship_api",ads_action:"save_settings",args:"cat_status="+t},type:"POST"})}),e(document).on("change","#attributes",function(){var t=e("#attributes").is(":checked")?1:0;e.ajaxQueue({url:ajaxurl,data:{action:"dm_alidropship_api",ads_action:"save_settings",args:"attributes="+t},type:"POST"})}),e(document).on("change","#publish",function(){var t=e("#publish").is(":checked")?1:0;e.ajaxQueue({url:ajaxurl,data:{action:"dm_alidropship_api",ads_action:"save_settings",args:"publish="+t},type:"POST"})}),e(document).on("change","#recommended_price",function(){var t=e("#recommended_price").is(":checked")?1:0;e.ajaxQueue({url:ajaxurl,data:{action:"dm_alidropship_api",ads_action:"save_settings",args:"recommended_price="+t},type:"POST"})}),e(document).on("click","#create_cat",function(){var t=e("#categoryImport").closest(".form-group"),o=e("#categoryImportMobile").closest(".form-group"),a=e("#categoryImportDM"),r=e("#categoryImportDMMobile"),n=e("#cat_status").closest(".form-group"),i=e("#cat_status_e").closest(".form-group");e(this).is(":checked")?(t.hide(),n.show(),i.show(),o.hide(),a.show(),r.show()):(t.show(),n.hide(),i.hide(),o.show(),a.hide(),r.hide())}),e(document).on("keypress keyup blur","#originalPriceFrom, #originalPriceTo",function(t){e(this).val(e(this).val().replace(/[^0-9\.]/g,"")),46==t.which&&-1==e(this).val().indexOf(".")||!(t.which<48||t.which>57)||t.preventDefault()}),e(document).on("keypress keyup blur","#volumeFrom, #volumeTo",function(t){e(this).val(e(this).val().replace(/[^0-9\.]/g,"")),46==t.which&&-1==e(this).val().indexOf(".")||!(t.which<48||t.which>57)||t.preventDefault()}),e(document).on("keyup","#originalPriceFrom, #originalPriceTo, #volumeFrom, #volumeTo",function(t){var o;if(void 0!==t.key?o=t.key:void 0!==t.keyIdentifier?o=t.keyIdentifier:void 0!==t.keyCode&&(o=t.keyCode),13!==o&&"Enter"!==o)return!1;e(p.page).val(1),e(document).trigger("search:request")}),e(document).on("change","#sortby",function(t){e(p.page).val(1),e(p.sort).val(e(this).val()),e(document).trigger("search:request")}),e(document).on("click",m,function(){var o=e(this).closest(p.item),a=o.data("id");e("body").addClass("mobile-overflow"),o.hasClass("opened")?"show"===e(this).data("action")?(e("#product-"+a).hide(),e("#supplier-"+a).show(),o.addClass("opened_mobile")):(e("#product-"+a).show(),e("#supplier-"+a).hide(),o.removeClass("opened_mobile"),e("body").removeClass("mobile-overflow")):(window.ADS.screenLock(),t.request("info","id="+a,t.showDetails))}),e(document).on("click","#search-btn",function(){if(e("#keywords").val().length<=2&&""!==e("#keywords").val())return window.ADS.notify(e("#errorKeyword").val(),"danger"),!1;e(p.page).val(1),e(document).trigger("search:request")}),e(document).on("click",".js-set_supplier",function(){var t=e(this).data("supplier");e(p.page).val(1),e("#supplier").val(t),e(document).trigger("search:request")}),e(document).on("focusout","#keywords",function(t){var o=e("#keywords").val();if((""===o||o.length>=3)&&o!==i)e(p.page).val(1),e(document).trigger("search:request");else if(o.length<=2&&""!==o)return window.ADS.notify(e("#errorKeyword").val(),"danger"),!1}),e(document).on("keyup","#keywords",function(t){var o;return void 0!==t.key?o=t.key:void 0!==t.keyIdentifier?o=t.keyIdentifier:void 0!==t.keyCode&&(o=t.keyCode),(13===o||"Enter"===o)&&(e(this).val().length<=2&&""!==e("#keywords").val()?(window.ADS.notify(e("#errorKeyword").val(),"danger"),!1):(e(p.page).val(1),void e(document).trigger("search:request")))}),e(document).on("pagination:click",function(t){parseInt(e(p.page).val())!==parseInt(t.page)&&(e(p.page).val(t.page),e(document).trigger("search:request"))}),e(document).on("click",".breadcrumbs-content a",function(){var t=e(this).data("selector");t&&(e(this).data("cat")?e("#"+e(this).data("selector")).val(e(this).data("cat")).trigger("change"):e(p.cat).val(0).trigger("change"),"categoryId"===t&&e("#subCategoryId").val(0))}),e(document).on("click",".report-this a",function(){var t=e("#reportModal");e("#report-id").val(e(this).data("id")),t.modal("show"),t.on("shown.bs.modal",function(){e("#report-message").val("").focus()})}),e("#reportModal").on("click","button",function(){var o=e("#report-message").val().trim(),a=e("#report-type").val();o.length<5?window.ADS.notify("Please enter a comment","danger"):"0"===a?window.ADS.notify("Please select a reason","danger"):t.request("send_report",e("#reportModal"),t.reportRender)}),e("#js-startCheck").on("click",function(){t.checkNot(1)})},init:function(){e(".maintenance").length||(e("#dm-not-container").length||(this.checker(),this.searchForm()),this.handler())}}).init();var b={request:function(t,o,a){o=""!==o&&o instanceof jQuery?window.ADS.serialize(o):o,e.ajaxQueue({url:ajaxurl,data:{action:"dm_alidropship_api",ads_action:t,args:o},type:"POST",dataType:"json",success:a})},importProduct:function(e,t,o,a,r,n,i){this.request("import_product","id="+e+"&cat_status="+i+"&cat="+t+"&create="+o+"&publish="+a+"&recommended_price="+r+"&attributes="+n,this.importRender)},importRender:function(t){t.hasOwnProperty("error")?(window.ADS.notify(t.error,"danger"),e(document).find(g).removeClass("animate-spinner").find("i").removeClass("infinite")):(t.hasOwnProperty("success")&&window.ADS.notify(t.success,"success"),t.hasOwnProperty("deposit")&&e("#has_deposit").text(t.deposit),b.importImages(t))},importImages:function(e){this.request("import_images",window.Base64.encode(JSON.stringify(e)),this.imagesRender)},imagesRender:function(t){if(t.hasOwnProperty("error")&&window.ADS.notify(t.error,"danger"),t.hasOwnProperty("success")&&(window.ADS.notify(t.success,"success"),t.hasOwnProperty("product"))){var o=e(c).find('[data-id="'+t.product+'"]');o.find(g).removeClass("animate-spinner").attr("disabled","disabled").text("Imported"),o.find(".progress-bar").addClass("progress-bar-green").css("width","100%")}if(t.hasOwnProperty("message")){if(t.hasOwnProperty("product"))e(c).find('[data-id="'+t.product+'"]').find(".progress-bar").css("width",t.percent+"%");setTimeout(function(){b.request("import_images",window.Base64.encode(JSON.stringify(t)),b.imagesRender)},500)}},handler:function(){var t=this;e(document).on("click",g,function(){window.matchMedia("screen and (max-width: 576px)").matches&&e("#categoryImport").val()?(e("#categoryImport").val("default"),e("#categoryImport").selectpicker("refresh")):window.matchMedia("screen and (min-width: 577px)").matches&&e("#categoryImportMobile").val()&&(e("#categoryImportMobile").val("default"),e("#categoryImportMobile").selectpicker("refresh"));var o=e(this).closest(p.item),a=o.data("id"),r=e("#categoryImport"),n=e("#categoryImportMobile"),i=e("#create_cat").is(":checked")?1:0,s=e("#attributes").is(":checked")?1:0,c=e("#publish").is(":checked")?1:0,l=e("#recommended_price").is(":checked")?1:0,d=e("#cat_status").val(),u=r.val()?r.val():n.val()?n.val():0;o.find(g).addClass("disabled").find("i").addClass("infinite"),t.importProduct(a,u,i,c,l,s,d)}),e(document).on("click",f,function(){e("#actions").val();var o=e(c).find(p.item+" input:checkbox:checked");if(0!==o.length){var r=e("#categoryImport"),n=e("#create_cat").is(":checked")?1:0,i=e("#attributes").is(":checked")?1:0,s=e("#publish").is(":checked")?1:0,l=e("#recommended_price").is(":checked")?1:0,d=e("#cat_status").val(),u=r.length?r.val():0;o.each(function(){var o=e(this).closest(p.item),r=o.find(".first-btn");title=o.find(".product-title h3").html();var c=r.attr("disabled");if(r.hasClass("disabled")||"undefined"!==(void 0===c?"undefined":a(c))&&!1!==c)return window.ADS.notify("<strong>"+title+"</strong> is already imported","danger"),!0;o.find(g).addClass("disabled").find("i").addClass("infinite");var h=o.data("id");t.importProduct(h,u,n,s,l,i,d)})}})},init:function(){e(".maintenance").length||this.handler()}};function y(t,o){if(void 0===o)return!1;var a=function(t){var o=t.split("?"),a=o[0],r=o[1].split("&"),n={};return e.each(r,function(e,t){var o=t.split("=");n[o[0]]=o[1]}),{hostName:a,urlArray:n}}(t);return e.each(o,function(e,t){a.urlArray[e]=t}),function(t,o){var a=t+"?",r=[];return e.each(o,function(e,t){void 0===t&&(t=""),r.push(e+"="+t)}),a+=r.join("&")}(a.hostName,a.urlArray)}b.init();var k=function(e,t){for(var o=[],a=e,r=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};a<=t;){var n=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);o.push(n),a=r.call(a,1)}return o},_={getStar:function(e){var t;return t=0,(e=parseInt(e.replace(/[^0-9]/g,"")))>0&&(t=parseInt(5*e/100)),t},pastReview:function(t,o){var a={flag:"",author:"",star:"",feedback:"",date:""},r=o.find(".feedback-list-wrap .feedback-item"),n={list:[]};0!==r.length?(r.each(function(t,o){var r=[],i=parseFloat(_.getStar(e(this).find(".star-view span").attr("style")));(a={}).feedback=e(this).find(".buyer-feedback").text(),e(this).find(".buyer-feedback .r-time-new").length&&(a.feedback=e(this).find(".buyer-feedback span:not(.r-time-new)").text()),a.feedback=a.feedback.replace("seller","store"),a.flag=e(this).find(".css_flag").text().toLowerCase(),a.author=e(this).find(".user-name").text(),a.star=i,a.ratePercent=parseInt(20*i),e(this).find(".pic-view-item").each(function(t,o){r.push(e(o).data("src"))});var s=e(this).find(".r-time");e(this).find(".r-time-new").length&&(s=e(this).find(".r-time-new")),a.date=s.text(),a.images=r,n.list.push(a)}),0!==n.list.length?t.html(window.ADS.objTotmpl(e(h).html(),n)):t.html("No Feedback")):t.html("No Feedback"),window.ADS.screenUnLock()},addTask:function(t,o){window.ADS.screenLock();var a,r,n=y("https:"+t,{evaStarFilterValue:"all+Stars",evaSortValue:"sortdefault%40feedback",page:1,currentPage:1,withPictures:!1,withPersonalInfo:!1,withAdditionalFeedback:!1,onlyFromMyCountry:!1,version:"",v:2,isOpened:!0,translate:"+Y+",jumpToTop:!1});a="&amp;",r="&",n=n.split(a).join(r),e.ajax({url:n,type:"GET",dataType:"html",success:function(t){var a=e("<div></div>");_.pastReview(o,e(a).append(t))},fail:function(e,t){console.log(t)}})},addAnalysisTask:function(t,o,r,n){console.log("32432"),window.DM.aliExtension.getPage("https://home.aliexpress.com/dropshipper/item_analysis_ajax.htm?productId="+t).then(function(i){if("object"===a(i.html)){if(i.html.hasOwnProperty("data")&&i.html.data.hasOwnProperty("saleVolume")){var s=i.html.data;e(o).find(".logistic-box").html(window.ADS.objTotmpl(e("#tmpl-analysis-table").html(),s));var c=[];Object.keys(s.saleVolume).length&&(c=s.saleVolume);var l=function(t,o,a){var r=k(new Date(Date.now()-1296e6),Date.now()-1728e5),n=[],i="",s="";return e.each(r,function(e,o){var a=new Date(o),r=a.getFullYear()+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+("0"+a.getDate()).slice(-2);0===e&&(i=o),s=o;var c=t.hasOwnProperty(o)?t[o]:0;n.push({type:"value",date:r,value:c})}),{sub_title:o,time:a,data:n,from:i,to:s}}(c,r,n);window.dmChart.chartData("#chart-"+t,l,256)}}else e(o).html(e("#tmpl-alert-nologin").html());window.ADS.screenUnLock()})},handler:function(){var t=this;e(document).on("click",p.item+" a.nav-link",function(){if(e(this).data("url"))t.addTask(e(this).data("url"),e(e(this).attr("href")));else if(e(this).data("analysis")){var o=e(e(this).attr("href"));e("body").hasClass("no-ali-extension")?o.html(e("#tmpl-alert-extension").html()):(o.hasClass("has-data")||(window.ADS.screenLock(),o.addClass("has-data")),t.addAnalysisTask(e(this).data("analysis"),e(this).attr("href"),e(this).data("sub_title"),e(this).data("time")))}}),e("body").on("test:extensions",function(t){t.active||e("body").addClass("no-ali-extension")})},init:function(){e(".maintenance").length||this.handler()}};_.init();var C;({requestShipping:function(t,o){window.DM.aliExtension.sendAliExtension("getShippingProduct",{price:1,productid:t,countryList:[{value:o}]}).then(function(t){console.log("getShippingProduct",t);var o={};for(var a in t){var n=t[a];if(n){var i=n.response;o[n.country]=i.body&&i.body.freightResult?i.body.freightResult.map(function(e){return{company:e.company,country:e.sendGoodsCountryFullName,total:r(e.standardFreightAmount.value),price:r(e.standardFreightAmount.value),s:!1,time:e.time,isTracked:e.tracking,free:100===e.discount,processingTime:e.processingTime}}):[]}}var s=[];return s.list=[],e.each(o,function(t,o){e.each(o,function(e,t){s.list.push(t)})}),s.list.length&&e("#list-shipping-"+C).html(window.ADS.objTotmpl(e("#tmpl-shipping-view").html(),s)),o})},init:function(){var t=this;e(".maintenance").length||(e(document).on("click",p.item+" a.nav-link",function(){e(this).data("shipping")&&(C=e(this).data("shipping"),t.requestShipping(C,e("#ship_country_"+C).val()))}),e(document).on("change",".shipping-list-tab .selectpicker",function(){C=e(this).parents(".shipping-list-tab").data("shipping"),e(this).selectpicker("refresh"),t.requestShipping(C,e(this).val())}))}}).init();var x=e("body"),S="#attributes",P="#recommended_price",D="select[id=categoryImport]",T="#categoryImport",I="#originalPriceFrom",F="#originalPriceTo",A="#volumeFrom",j="#volumeTo",O="select[id=warehouse]",M="#warehouse",q="select[id=to]",R="select[id=company]",L=".description-tab",U=".mobile-select-cat",N=".category-id .bootstrap-select .dropdown-menu",Q=".dropdown-menu.mobile div.inner",E=".import-filters-btn",H=".import-settings-btn",V=".opened_mobile",$="#dm_collapseFilters",J=".subCategoryId .bootstrap-select .dropdown-menu",G=".mobile-select-cat.mobile .form-group:first",z="#dm_collapseSettingsM",K=".category-create",Y=".shipping-btn",B=".reviews-btn",W=".analysis-btn",X="#create_cat_e",Z="#cat_status_e",ee="#cat_status",te={emulatingImportSettings:function(){x.on("click",X,function(){e("#create_cat").trigger("click")}),x.on("change",Z,function(){e(ee).val(e(Z).val()),e(ee).selectpicker("refresh"),e(ee).trigger("change")}),x.on("click","#attributes_e",function(){e(S).trigger("click")}),x.on("click","#publish_e",function(){e("#publish").trigger("click")}),x.on("click","#recommended_price_e",function(){e(P).trigger("click")})},emulatingCategoryImport:function(){x.on("changed.bs.select","#categoryImportMobile",function(){e(D).val(e("select[id=categoryImportMobile]").val()),e(T).selectpicker("refresh")})},emulatingFiltersSettings:function(){x.on("change","#originalPriceFrom_e",function(){e(I).val(e("#originalPriceFrom_e").val())}),x.on("change","#originalPriceTo_e",function(){e(F).val(e("#originalPriceTo_e").val())}),x.on("change","#volumeFrom_e",function(){e(A).val(e("#volumeFrom_e").val())}),x.on("change","#volumeTo_e",function(){e(j).val(e("#volumeTo_e").val())}),x.on("changed.bs.select","#warehouse_e",function(){e(O).val(e("select[id=warehouse_e]").val()),e(M).selectpicker("refresh")}),x.on("changed.bs.select","#to_e",function(){e(q).val(e("select[id=to_e]").val()),e("#to").selectpicker("refresh")}),x.on("changed.bs.select","#company_e",function(){e(R).val(e("select[id=company_e]").val()),e("#company").selectpicker("refresh")}),x.on("click","#free_e",function(){e("#free").trigger("click")})},categoryChanges:function(){e("body").on("show.bs.select",".category-id",function(){x.addClass("mobile-overflow"),e(U).addClass("mobile"),e(N).addClass("mobile"),e(Q).css({height:e(window).height(),"max-height":e(window).height()-125}),e(".category-id .dropdown-menu.mobile").css({height:e(window).height(),"max-height":e(window).height()-48})}),x.on("hide.bs.select",".category-id",function(){e(x).removeClass("mobile-overflow"),e(U).removeClass("mobile"),e(N).removeClass("mobile")}),x.on("show.bs.select",".subCategoryId",function(){e(x).addClass("mobile-overflow"),e(U).addClass("mobile"),e(J).addClass("mobile"),e(G).addClass("hidden"),e(Q).css({height:e(window).height(),"max-height":e(window).height()-48}),e(".subCategoryId .dropdown-menu.mobile").css({height:e(window).height(),"max-height":e(window).height()-48})}),x.on("hide.bs.select",".subCategoryId",function(){e(x).removeClass("mobile-overflow"),e(G).removeClass("hidden"),e(U).removeClass("mobile"),e(J).removeClass("mobile")})},settingsChanges:function(){x.on("show.bs.collapse",z,function(){e(x).addClass("mobile-overflow"),e(H).removeClass("btn-green"),e(H).addClass("mobile"),e(z).addClass("mobile"),e(K).css({order:"-1"}),e("#dm_collapseSettingsM.mobile .import-settings").css({height:e(window).height(),"max-height":e(window).height()})}),x.on("hidden.bs.collapse",z,function(){x.removeClass("mobile-overflow"),e(H).removeClass("mobile"),e(z).removeClass("mobile")})},settingsFilters:function(){x.on("show.bs.collapse",$,function(){e(x).addClass("mobile-overflow"),e(E).removeClass("btn-green"),e(E).addClass("mobile"),e($).addClass("mobile"),e(K).css({order:"-1"}),e("#dm_collapseFilters.mobile").css({height:e(window).height(),"max-height":e(window).height()}),e("#dm_collapseFilters.mobile .import-filters-btn").css({height:e(window).height(),"max-height":e(window).height()})}),x.on("hidden.bs.collapse",$,function(){x.removeClass("mobile-overflow"),e(E).removeClass("mobile"),e($).removeClass("mobile")})},productsInnerChanges:function(){x.on("show.bs.collapse",'[id*="dm_collapseVariants-"]',function(t){e(V).addClass("mobile-overflow"),e(".variants-btn").addClass("expanded"),e(t.target).closest(e(".params-list-sku")).addClass("expanded")}),x.on("hide.bs.collapse",'[id*="dm_collapseVariants-"]',function(t){e(V).removeClass("mobile-overflow"),e(".variants-btn.expanded").removeClass("expanded"),e(t.target).closest(e('[id*="dm_collapseVariants-"]')).removeClass("expanded")}),x.on("click",".desc-btn",function(t){e(V).addClass("mobile-overflow");var o=e(t.target).attr("id").substr(12);e(".desc-btn").addClass("expanded"),e("#description-tab-"+o).addClass("expanded")}),x.on("click",".desc-btn.expanded",function(t){e(V).removeClass("mobile-overflow");var o=e(t.target).attr("id").substr(12);e(".desc-btn").removeClass("expanded"),e("#description-tab-"+o).removeClass("expanded")}),x.on("click",Y,function(t){e(V).addClass("mobile-overflow");var o=e(t.target).attr("id").substr(9);e(Y).addClass("expanded"),e("#shipping-tab-"+o).addClass("expanded")}),x.on("click",".shipping-btn.expanded",function(t){e(V).removeClass("mobile-overflow");var o=e(t.target).attr("id").substr(9);e(Y).removeClass("expanded"),e("#shipping-tab-"+o).removeClass("expanded")}),x.on("click",B,function(t){e(V).addClass("mobile-overflow");var o=e(t.target).attr("id").substr(8);e(B).addClass("expanded"),e("#reviews-tab-"+o).addClass("expanded show")}),x.on("click",".reviews-btn.expanded",function(t){e(V).removeClass("mobile-overflow");var o=e(t.target).attr("id").substr(8);e(B).removeClass("expanded"),e("#reviews-tab-"+o).removeClass("expanded show")}),x.on("click",W,function(t){e(V).addClass("mobile-overflow");var o=e(t.target).attr("id").substr(9);e(W).addClass("expanded"),e("#analysis-tab-"+o).addClass("expanded show")}),x.on("click",".analysis-btn.expanded",function(t){e(V).removeClass("mobile-overflow");var o=e(t.target).attr("id").substr(9);e(W).removeClass("expanded"),e("#analysis-tab-"+o).removeClass("expanded show")})},reverseResolution:function(){x.on("click","#create_cat",function(){e(X).trigger("click")}),x.on("change",ee,function(){e(Z).val(e(ee).val()),e(Z).selectpicker("refresh")}),x.on("click",S,function(){e("#attributes_e").trigger("click")}),x.on("click","#publish",function(){e("#publish_e").trigger("click")}),x.on("click",P,function(){e("#recommended_price_e").trigger("click")}),x.on("changed.bs.select",T,function(){var t=e(D).val();e("select[id=categoryImportMobile]").val(t),e("#categoryImportMobile").selectpicker("refresh")}),x.on("change",I,function(){var t=e(I).val();e("#originalPriceFrom_e").val(t)}),x.on("change",F,function(){var t=e(F).val();e("#originalPriceTo_e").val(t)}),x.on("change",A,function(){var t=e(A).val();e("#volumeFrom_e").val(t)}),x.on("change",j,function(){var t=e(j).val();e("#volumeTo_e").val(t)}),x.on("changed.bs.select",M,function(){var t=e(O).val();e("select[id=warehouse_e]").val(t),e("#warehouse_e").selectpicker("refresh")}),x.on("changed.bs.select","#to",function(){var t=e(q).val();e("select[id=to_e]").val(t),e("#to").selectpicker("refresh"),e("#to_e").selectpicker("refresh")}),x.on("changed.bs.select","#company",function(){var t=e(R).val();e("select[id=company_e]").val(t),e("#company_e").selectpicker("refresh")}),x.on("click","#free",function(){e("#free_e").trigger("click")}),e(z).css({height:"auto","max-height":"auto"}),e("#dm_collapseSettingsM .import-settings").css({height:"auto","max-height":"auto"}),e(z).removeClass("mobile"),0===e(".mobile_dest").length&&e(".product-info .description-row").length>0&&(w.prependTo(".description-row .col"),e(L).addClass("active show"))},init:function(){x.on("show.bs.select",e("#to"),function(){e("#to").selectpicker("refresh")}),window.matchMedia("screen and (max-width: 576px)").matches?(e("body .import-settings-btn").html("SETTINGS"),e("body .params-list-sku").addClass("collapse"),e(L).removeClass("active show"),e(".shipping-list-tab").removeClass("active show"),e(".reviews-tab").removeClass("active show"),this.emulatingImportSettings(),this.emulatingCategoryImport(),this.emulatingFiltersSettings(),this.categoryChanges(),this.settingsChanges(),this.settingsFilters(),this.productsInnerChanges()):this.reverseResolution()}};te.init(),window.addEventListener("resize",function(){te.init()},!0),e.ajaxQueue({url:ajaxurl,data:{action:"dm_alidropship_api",ads_action:"import_setting"},dataType:"json",type:"POST",success:function(t){if(1===t.create_cat){e("#create_cat").prop("checked",!0),e(X).prop("checked",!0);var o=e("#categoryImport").closest(".form-group"),a=e("#categoryImportMobile").closest(".form-group"),r=e("#categoryImportDM"),n=e("#categoryImportDMMobile"),i=e("#cat_status").closest(".form-group"),s=e("#cat_status_e").closest(".form-group");o.hide(),a.hide(),r.show(),n.show(),i.show(),s.show()}1===t.attributes&&(e(S).prop("checked",!0),e("#attributes_e").prop("checked",!0)),t.cat_status>0&&(e("#cat_status").val(t.cat_status).selectpicker("refresh"),e("#cat_status_e").val(t.cat_status).selectpicker("refresh")),1===t.publish&&(e("#publish").prop("checked",!0),e("#publish_e").prop("checked",!0)),1===t.recommended_price&&(e(P).prop("checked",!0),e("#recommended_price_e").attr("checked","checked")),e.uniform.update()}})})}});