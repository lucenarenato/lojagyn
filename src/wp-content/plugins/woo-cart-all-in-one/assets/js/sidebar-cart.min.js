function viwcaio_sidebar_cart_init(){jQuery(document).on("mouseenter",".vi-wcaio-sidebar-cart-icon-wrap",function(){jQuery(this).hasClass("vi-wcaio-sidebar-cart-icon-wrap-click")?jQuery(this).removeClass("vi-wcaio-sidebar-cart-icon-wrap-mouseleave").addClass("vi-wcaio-sidebar-cart-icon-wrap-mouseenter"):vi_wcaio_sc_toggle("show")}).on("mouseleave",".vi-wcaio-sidebar-cart-icon-wrap",function(){jQuery(this).hasClass("vi-wcaio-sidebar-cart-icon-wrap-mouseenter")&&jQuery(this).removeClass("vi-wcaio-sidebar-cart-icon-wrap-mouseenter").addClass("vi-wcaio-sidebar-cart-icon-wrap-mouseleave")}).on("click",".vi-wcaio-sidebar-cart-icon-wrap",function(){jQuery(this).hasClass("vi-wcaio-sidebar-cart-icon-wrap-click")&&vi_wcaio_sc_toggle("show")}),jQuery(document).on("click",".vi-wcaio-sidebar-cart-overlay, .vi-wcaio-sidebar-cart-close-wrap",function(){jQuery(this).hasClass("vi-wcaio-not-hidden")||vi_wcaio_sc_toggle("hide")}),jQuery(document).on("click keydown",".vi-wcaio-sidebar-cart-wrap.vi-wcaio-sidebar-cart-wrap-warning",function(){vi_wcaio_hide_message()}),jQuery(".vi-wcaio-sidebar-cart-footer-pd-wrap-wrap:not(.vi-wcaio-disabled):not(.vi-wcaio-slide-init)").each(function(){vi_wcaio_sc_flexslider(jQuery(this))}),viwcaio_sidebar_cart_update()}function viwcaio_sidebar_cart_update(){viwcaio_sidebar_cart_refresh(viwcaio_sc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_get_cart_fragments"),{viwcaio_get_cart_fragments:1}),jQuery(document.body).on("added_to_cart",function(a,i,e,r){if(r.hasClass("vi-wcaio-pd_plus-product-bt-atc")||jQuery(".vi-wcaio-sidebar-cart-content-open").length)return!1;let o=jQuery(".vi-wcaio-sidebar-cart-wrap"),c=o.data("effect_after_atc"),t=o.data("fly_to_cart");if(o.find(".vi-wcaio-sidebar-cart.vi-wcaio-disabled").length?(vi_wcaio_sc_icon_may_be_toggle(o,!0,!0),o.find(".vi-wcaio-sidebar-cart").removeClass("vi-wcaio-disabled")):jQuery(".vi-wcaio-sidebar-cart-icon-wrap.vi-wcaio-sidebar-cart-icon-wrap-close").length&&(vi_wcaio_sc_icon_may_be_toggle(o,!0,!0),o=jQuery(".vi-wcaio-sidebar-cart-wrap")),!c&&!t)return!1;if(t){let a=viwcaio_get_img_product(r),i=jQuery(".vi-wcaio-sidebar-cart-icon-wrap");if(jQuery(a).length&&i.length){a=jQuery(a);let e,r,t,s,n,d,w=i.offset().top||o.offset().top,l=i.offset().left||o.offset().left;a.closest(".woocommerce-product-gallery__wrapper").length?e=a.closest(".woocommerce-product-gallery__wrapper"):a.closest(".woocommerce-product-gallery__image").length&&(e=a.closest(".woocommerce-product-gallery__image")),e&&e.length&&(e.find(".flex-active-slide").length?r=e.find(".flex-active-slide"):e.find(".slick-active").length?r=e.find(".slick-active"):e.find(".active").length&&(r=e.find(".active"))),r&&jQuery(r).length||(r=a),r.find("img").length&&(r=r.find("img").first()),t=r.offset().top,s=r.offset().left,n=r.width(),d=r.height(),jQuery(".vi-wcaio-img-flying").remove(),jQuery("body").append('<div class="vi-wcaio-img-flying"></div>');let v=jQuery("div.vi-wcaio-img-flying");a.clone().appendTo(v),v.css({top:t+"px",left:s+"px",width:n+"px",height:d+"px"}).fadeIn("slow"),v.animate({width:.6*n+"px",height:.6*d+"px",top:"+="+.2*d+"px",left:"+="+.2*n+"px"},400,"swing",function(){v.animate({top:w+"px",left:l+"px",height:"18px",width:"25px"},800,"swing",function(){jQuery("div.vi-wcaio-img-flying").fadeIn("fast",function(){jQuery("div.vi-wcaio-img-flying").remove()}),jQuery(document.body).trigger("viwcaio_sc_effect_after_atc",[o,c])})})}else jQuery(document.body).trigger("viwcaio_sc_effect_after_atc",[o,c])}else jQuery(document.body).trigger("viwcaio_sc_effect_after_atc",[o,c])}),jQuery(document.body).on("viwcaio_sc_effect_after_atc",function(a,i,e){switch(e){case"open":vi_wcaio_sc_toggle("show");break;case"shake_horizontal":i.find(".vi-wcaio-sidebar-cart-icon-wrap").removeClass("vi-wcaio-sidebar-cart-icon-wrap-mouseleave vi-wcaio-sidebar-cart-icon-wrap-open").addClass("vi-wcaio-sidebar-cart-icon-wrap-effect-shake_horizontal"),setTimeout(function(){i.find(".vi-wcaio-sidebar-cart-icon-wrap").removeClass("vi-wcaio-sidebar-cart-icon-wrap-effect-shake_horizontal")},1100);break;case"shake_vertical":i.find(".vi-wcaio-sidebar-cart-icon-wrap").removeClass("vi-wcaio-sidebar-cart-icon-wrap-mouseleave vi-wcaio-sidebar-cart-icon-wrap-open").addClass("vi-wcaio-sidebar-cart-icon-wrap-effect-shake_vertical"),setTimeout(function(){i.find(".vi-wcaio-sidebar-cart-icon-wrap").removeClass("vi-wcaio-sidebar-cart-icon-wrap-effect-shake_vertical")},1100)}}),jQuery(document.body).on("removed_from_cart",function(a,i,e,r){let o=jQuery(".vi-wcaio-sidebar-cart-wrap"),c=jQuery(r).data("cart_item_key")||"";c&&o.find('.vi-wcaio-sidebar-cart-pd-wrap[data-cart_item_key="'+c+'"]').length&&o.find('.vi-wcaio-sidebar-cart-pd-wrap[data-cart_item_key="'+c+'"]').remove(),vi_wcaio_sc_icon_may_be_toggle(o)}),jQuery(document.body).on("click",".vi-wcaio-sidebar-cart-pd-remove-wrap a.vi-wcaio-sidebar-cart-pd-remove",function(a){a.preventDefault(),a.stopPropagation();let i=jQuery(this),e=i.closest(".vi-wcaio-sidebar-cart-wrap"),r={cart_item_key:i.data("cart_item_key")};jQuery.ajax({url:viwcaio_sc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_remove_item"),type:"POST",data:r,beforeSend:function(){e.find(" .vi-wcaio-sidebar-cart-loading-wrap").removeClass("vi-wcaio-disabled")},success:function(a){if(!a||a.error)return window.location.reload(),!1;e.addClass("vi-wcaio-sidebar-cart-wrap-updated"),jQuery(document.body).trigger("wc_fragment_refresh"),jQuery(document.body).trigger("removed_from_cart",[a.fragments,a.cart_hash,i])},error:function(){e.find(".vi-wcaio-sidebar-cart-loading-wrap").addClass("vi-wcaio-disabled")}})}),jQuery(document.body).on("click",".vi-wcaio-sidebar-cart-pd-wrap .vi_wcaio_change_qty",function(a){a.preventDefault(),a.stopPropagation();let i=jQuery(this).closest(".vi-wcaio-sidebar-cart-pd-quantity").find(".vi_wcaio_qty"),e=parseFloat(i.val()),r=parseFloat(i.attr("step")),o=parseFloat(i.attr("min")),c=parseFloat(i.attr("max"));if(jQuery(this).hasClass("vi_wcaio_plus")){if(c===e)return!1;e+=r}else{if(o===e)return!1;e-=r}i.val(e).trigger("change")}),jQuery(document.body).on("change",".vi-wcaio-sidebar-cart-pd-wrap input.vi_wcaio_qty",function(a){a.preventDefault(),a.stopPropagation();let i=parseFloat(jQuery(this).val()),e=parseFloat(jQuery(this).attr("min")),r=parseFloat(jQuery(this).attr("max"));e>i&&(i=e),i>r&&(i=r),jQuery(this).val(i),jQuery(this).addClass("vi_wcaio_qty_update").closest(".vi-wcaio-sidebar-cart-wrap").find(".vi-wcaio-sidebar-cart-bt-update").removeClass("vi-wcaio-disabled")}),jQuery(document.body).on("click",".vi-wcaio-sidebar-cart-wrap .vi-wcaio-sidebar-cart-bt-update",function(a){a.preventDefault(),a.stopPropagation();let i,e=jQuery(this),r=e.closest(".vi-wcaio-sidebar-cart-wrap");i=r.find(".vi_wcaio_qty_update").length?r.find(".vi-wcaio-sidebar-cart-products input.vi_wcaio_qty_update").serialize():r.find(".vi-wcaio-sidebar-cart-products input").serialize(),jQuery.ajax({url:viwcaio_sc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_change_quantity"),type:"POST",data:i,beforeSend:function(){r.find(" .vi-wcaio-sidebar-cart-loading-wrap").removeClass("vi-wcaio-disabled")},success:function(a){if(!a||a.error)return window.location.reload(),!1;e.addClass("vi-wcaio-disabled"),jQuery(document.body).trigger("wc_fragment_refresh"),vi_wcaio_sc_icon_may_be_toggle(r)},error:function(){r.find(".vi_wcaio_qty_update").removeClass("vi_wcaio_qty_update"),r.find(".vi-wcaio-sidebar-cart-loading-wrap").addClass("vi-wcaio-disabled")}})}),jQuery(document.body).on("click",".vi-wcaio-sidebar-cart-wrap .vi-wcaio-bt-coupon-code",function(a){a.preventDefault(),a.stopPropagation();let i=jQuery(this).closest(".vi-wcaio-sidebar-cart-wrap"),e={vi_wcaio_coupon_code:i.find(".vi-wcaio-coupon-code").val()||""};jQuery.ajax({url:viwcaio_sc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_apply_coupon"),type:"POST",data:e,beforeSend:function(){i.find(" .vi-wcaio-sidebar-cart-loading-wrap").removeClass("vi-wcaio-disabled")},success:function(a){if(!a)return window.location.reload(),!1;vi_wcaio_show_message(a),i.addClass("vi-wcaio-sidebar-cart-wrap-updated"),jQuery(document.body).trigger("wc_fragment_refresh"),vi_wcaio_sc_icon_may_be_toggle(i)},error:function(){i.find(".vi-wcaio-sidebar-cart-loading-wrap").addClass("vi-wcaio-disabled")}})})}function viwcaio_sidebar_cart_refresh(a,i){jQuery(document.body).on("wc_fragments_loaded",function(){jQuery(".vi-wcaio-sidebar-cart-wrap:not(.vi-wcaio-sidebar-cart-wrap-fragments-load)").length&&(jQuery(".vi-wcaio-sidebar-cart-wrap:not(.vi-wcaio-sidebar-cart-wrap-fragments-load)").addClass("vi-wcaio-sidebar-cart-wrap-fragments-load"),jQuery.ajax({url:a,type:"POST",data:i,beforeSend:function(){jQuery(".vi-wcaio-sidebar-cart-wrap").find(" .vi-wcaio-sidebar-cart-loading-wrap").removeClass("vi-wcaio-disabled")},success:function(a){a.fragments&&jQuery.each(a.fragments,function(a,i){jQuery(a).replaceWith(i)}),jQuery(".vi-wcaio-sidebar-cart-wrap").addClass("vi-wcaio-sidebar-cart-wrap-updated"),jQuery(document.body).trigger("wc_fragment_refresh")},error:function(){jQuery(".vi-wcaio-sidebar-cart-wrap").find(".vi-wcaio-sidebar-cart-loading-wrap").addClass("vi-wcaio-disabled")}}))}),jQuery(document.body).on("wc_fragments_refreshed wc_fragments_ajax_error",function(){jQuery(".vi-wcaio-sidebar-cart-wrap").find(".vi-wcaio-sidebar-cart-loading-wrap").addClass("vi-wcaio-disabled"),jQuery(".vi-wcaio-sidebar-cart-wrap").removeClass("vi-wcaio-sidebar-cart-wrap-updated"),vi_wcaio_sc_icon_may_be_toggle(jQuery(".vi-wcaio-sidebar-cart-wrap"))})}function vi_wcaio_sc_toggle(a="",i=""){let e=jQuery(".vi-wcaio-sidebar-cart-content-wrap"),r=jQuery(".vi-wcaio-sidebar-cart").data("position"),o=jQuery(".vi-wcaio-sidebar-cart").data("effect");if("hide"===a&&e.hasClass("vi-wcaio-sidebar-cart-content-close"))return!1;if("show"===a&&e.hasClass("vi-wcaio-sidebar-cart-content-open"))return!1;vi_wcaio_sc_design(e);let c="top_left"===r||"bottom_left"===r?"left":"right";if("start"===a&&i)return e.hasClass("vi-wcaio-sidebar-cart-content-close")?(e.removeClass("vi-wcaio-sidebar-cart-content-open vi-wcaio-sidebar-cart-content-open-"+o+"-"+c),e.addClass("vi-wcaio-sidebar-cart-content-close vi-wcaio-sidebar-cart-content-close-"+i+"-"+c)):(e.addClass("vi-wcaio-sidebar-cart-content-open vi-wcaio-sidebar-cart-content-open-"+i+"-"+c),e.removeClass("vi-wcaio-sidebar-cart-content-close vi-wcaio-sidebar-cart-content-close-"+o+"-"+c)),jQuery(".vi-wcaio-sidebar-cart").data("effect",i),!1;i=i||o;let t=jQuery(".vi-wcaio-sidebar-cart").data("old_position")||"",s=t?"top_left"===t||"bottom_left"===t?"left":"right":c,n="vi-wcaio-sidebar-cart-content-open vi-wcaio-sidebar-cart-content-open-"+i+"-"+c,d="vi-wcaio-sidebar-cart-content-close vi-wcaio-sidebar-cart-content-close-"+i+"-"+c,w="vi-wcaio-sidebar-cart-content-open vi-wcaio-sidebar-cart-content-open-"+o+"-"+s,l="vi-wcaio-sidebar-cart-content-close vi-wcaio-sidebar-cart-content-close-"+o+"-"+s+" vi-wcaio-sidebar-cart-content-close-"+o+"-"+c;e.hasClass("vi-wcaio-sidebar-cart-content-close")?(e.addClass(n).removeClass(d).removeClass(l),jQuery("html").addClass("vi-wcaio-html-non-scroll"),jQuery(".vi-wcaio-sidebar-cart-overlay").removeClass("vi-wcaio-disabled"),jQuery(".vi-wcaio-sidebar-cart").data("effect",i),vi_wcaio_sc_icon_toggle()):(e.addClass(d).removeClass(n).removeClass(w),jQuery(".vi-wcaio-sidebar-cart-overlay").addClass("vi-wcaio-disabled"),jQuery("html").removeClass("vi-wcaio-html-non-scroll"),vi_wcaio_sc_icon_toggle(!0)),jQuery(".vi-wcaio-sidebar-cart").data("effect",i)}function vi_wcaio_sc_icon_may_be_toggle(a,i=!1,e=!1){return jQuery(".vi-wcaio-sidebar-cart-loading-wrap").addClass("vi-wcaio-disabled"),i?(vi_wcaio_sc_icon_toggle(!0,e),!1):(a||(vi_wcaio_sc_toggle("hide"),vi_wcaio_sc_icon_toggle()),(!(a=jQuery(a)).length||!a.data("empty_enable")&&!a.find(".vi-wcaio-sidebar-cart-pd-wrap").length)&&(vi_wcaio_sc_toggle("hide"),void jQuery(".vi-wcaio-coupon-code").val("")))}function vi_wcaio_sc_icon_toggle(a=!1,i=!1){if(a){if(!i&&!jQuery(".vi-wcaio-sidebar-cart-wrap").data("empty_enable")&&!jQuery(".vi-wcaio-sidebar-cart-wrap").find(".vi-wcaio-sidebar-cart-pd-wrap").length)return!1;jQuery(".vi-wcaio-sidebar-cart-icon-wrap").removeClass("vi-wcaio-disabled vi-wcaio-sidebar-cart-icon-wrap-close vi-wcaio-sidebar-cart-icon-wrap-mouseenter vi-wcaio-sidebar-cart-icon-wrap-mouseleave"),jQuery(".vi-wcaio-sidebar-cart-icon-wrap").addClass("vi-wcaio-sidebar-cart-icon-wrap-open")}else jQuery(".vi-wcaio-sidebar-cart-icon-wrap").addClass("vi-wcaio-sidebar-cart-icon-wrap-close"),jQuery(".vi-wcaio-sidebar-cart-icon-wrap").removeClass("vi-wcaio-sidebar-cart-icon-wrap-open vi-wcaio-sidebar-cart-icon-wrap-mouseenter vi-wcaio-sidebar-cart-icon-wrap-mouseleave")}function viwcaio_get_img_product(a){let i,e=a.closest(".vi-wcaio-sb-wrap");return e.length||(e=a.closest(".tmb-woocommerce")),e.length||(e=a.closest(".product")),e.length||(e=a.closest(".item-product")),e.length||(e=a.closest(".product-item")),e.length||(e=a.closest(".gdlr-core-item-list")),e.length||(e=a.closest(".product-warp-item")),e.length||(e=a.closest(".item-grid")),e.length||(e=a.closest(".product__box")),e.length||(e=a.closest(".woo-entry-inner")),e.find(".vi-wcaio-sb-product-img").length?i=e.find(".vi-wcaio-sb-product-img").first():e.find(".wp-post-image").length?i=e.find(".wp-post-image").first():e.find(".attachment-shop_catalog").length?i=e.find(".attachment-shop_catalog").first():e.find(".gdlr-core-product-thumbnail").length?i=e.find(".gdlr-core-product-thumbnail").first():e.find(".woo-entry-image-main").length?i=e.find(".woo-entry-image-main").first():e.find(".wp-post-image.vi-load").length?i=e.find(".wp-post-image.vi-load").first():e.find(".attachment-woocommerce_thumbnail").length&&(i=e.find(".attachment-woocommerce_thumbnail").first()),i||(i=!(!e||!e.find("img"))&&e.find("img").first()),i}function vi_wcaio_sc_design(a){a=jQuery(a),window.innerWidth<782&&a.css({maxHeight:window.innerHeight})}function vi_wcaio_sc_flexslider(a){let i=!1;(a=jQuery(a)).closest(".vi-wcaio-sidebar-cart-rtl").length&&(i=!0),a.find("img").each(function(){jQuery(this).attr("src",jQuery(this).data("src"))}),a.addClass("vi-wcaio-slider-init"),a.viwcaio_flexslider({namespace:"vi-wcaio-slider-",selector:".vi-wcaio-sidebar-cart-footer-pd-wrap .vi-wcaio-sidebar-cart-footer-pd",animation:"slide",animationLoop:1,itemWidth:145,itemMargin:10,controlNav:!1,maxItems:window.outerWidth>480?2:1,reverse:i,rtl:i,move:1,touch:!0,slideshow:!1})}function vi_wcaio_show_message(a){jQuery(".vi-wcaio-sidebar-cart-wrap").removeClass("vi-wcaio-sidebar-cart-wrap-warning"),jQuery(".vi-wcaio-warning-wrap").length?(jQuery(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open"),jQuery(".vi-wcaio-warning-wrap > div").html(a)):jQuery("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open"><div>'+a+"</div></div>"),setTimeout(function(){jQuery(".vi-wcaio-sidebar-cart-wrap").addClass("vi-wcaio-sidebar-cart-wrap-warning")},1e3),setTimeout(function(){vi_wcaio_hide_message()},15e3)}function vi_wcaio_hide_message(){jQuery(".vi-wcaio-sidebar-cart-wrap").removeClass("vi-wcaio-sidebar-cart-wrap-warning"),jQuery(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")}!function(){if("undefined"==typeof viwcaio_sc_params)return!1;jQuery(document).ready(function(){"use strict";jQuery(".vi-wcaio-sidebar-cart-wrap:not(.vi-wcaio-sidebar-cart-wrap-init)").length&&(jQuery(".vi-wcaio-sidebar-cart-wrap:not(.vi-wcaio-sidebar-cart-wrap-init)").addClass("vi-wcaio-sidebar-cart-wrap-init"),viwcaio_sidebar_cart_init())}),jQuery(window).on("load",function(){"use strict";jQuery(".vi-wcaio-sidebar-cart-wrap:not(.vi-wcaio-sidebar-cart-wrap-init)").length&&(jQuery(".vi-wcaio-sidebar-cart-wrap:not(.vi-wcaio-sidebar-cart-wrap-init)").addClass("vi-wcaio-sidebar-cart-wrap-init"),viwcaio_sidebar_cart_init())}),jQuery(window).on("resize",function(){"use strict";vi_wcaio_sc_design(jQuery(".vi-wcaio-sidebar-cart-content-wrap"))})}();